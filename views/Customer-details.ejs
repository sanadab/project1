<!DOCTYPE html>
<html lang="en">

<head>
    <title>Customer-details</title>
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }
        
        th,
        td {
            text-align: left;
            padding: 8px;
        }
        
        tr:nth-child(even) {
            background-color: #f2f2f2
        }
        
        th {
            background-color: rgb(97, 180, 8);
            color: white;
        }
    </style>
    <link rel="icon" href="images/favicon.ico">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Employees.css">

</head>

<body>

    <nav class="navbar">
        <div class="navlinks">
            <ul>
                <li><a href="Home.html">Home</a></li>
                <li><a href="profile">Admin Profile</a></li>
            </ul>
        </div>
    </nav>


    <table id="PatientqueueTable" class="container">


        <thead>
            <tr>
                <th>
                    <h1>First Name</h1>
                </th>
                <th>
                    <h1>Last Name</h1>
                </th>
                <th>
                    <h1>ID</h1>
                </th>
                <th>
                    <h1>E-mail</h1>
                </th>
                <th>
                    <h1>Phone</h1>
                </th>
                <th>
                    <h1></h1>
                </th>
                <th>
                    <h1></h1>
                </th>


            </tr>
        </thead>
        <tbody>
            <%p.forEach(user=>{ %>
                <% if(user.Roll==='customer'){%>
                    <tr>
                        <td>
                            <p>
                                <%= user.FirstName %>
                            </p>
                        </td>
                        <td>
                            <p>
                                <%= user.LastName %>
                            </p>
                        </td>
                        <td>
                            <p>
                                <%= user.id %>
                            </p>
                        </td>
                        <td>
                            <p>
                                <%= user.email%>
                            </p>
                        </td>
                        <td>
                            <p>
                                <%= user.Phone%>
                            </p>
                        </td>
                        <td>
                            <p>
                                <!-- <form action="/Block" method="post" class="form-container"></form> -->
                                <form action="/Block" method="POST" class="form-container">
                                    <button type="submit" name="name" value=<%= user.id %> class="btn confirm">Block </button>
                                  </form>
                                <!-- <button id="delete-button">Block</button> -->
                                    <!-- <script>
                                        const deleteUser = async (req, res) => {
                                        const { id } = req.body;
                                        const user = await User.findByIdAndDelete(id);
                                        if (!user) {
                                        return res.status(400).json("User not found");
                                        }
                                        res.status(200).json("User deleted successfully");
                                        };
                                    </script> -->
                            </p>
                                <script>
                                    const button = document.querySelector('#delete-button');

                                    button.addEventListener('click', async() => {
                                        const db = client.db('test');
                                        const collection = db.collection('users');

                                        await collection.deleteone({
                                            FirstName: 'abed',
                                            id: '19'
                                        });

                                        client.close();
                                    });
                                </script>



                           

                        </td>
                        <td>

                            <p>
                                <a href="mailto: <%= user.email%>?<%= user.email%>&<%= user.email%>&subject=You are experiencing problems with your account. Please contact us. Thank you&body=Message Body">
                                    <button>Warning</button>
                                </a>


                            </p>
                        </td>


                    </tr>
                    <%}%>
                        <%})%>


        </tbody>
    </table>
</body>

</html>